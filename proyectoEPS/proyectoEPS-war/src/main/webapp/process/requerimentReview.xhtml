<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="../templates/template-one.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
                xmlns:jsf="http://xmlns.jcp.org/jsf"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:o="http://omnifaces.org/ui">

    <f:metadata>
        <o:viewParam name="idRequeriment" required="true" value="#{requerimentReviewView.processId}"
                     requiredMessage="Ningun valor">
            <o:viewParamValidationFailed sendError="404" message="Error parametro"/>
        </o:viewParam>
        <o:viewAction action="#{requerimentReviewView.loadCurrentProcess()}" />
    </f:metadata>
    

    <ui:define name="title">
        Revision Requisitos
    </ui:define>

    <ui:define name="content">
        <h:form id="frmLogin">            
            <p:focus id="focuss" context="frmLogin" />
            <p:messages  globalOnly="true"/>
            <fieldset class="center-block">
                <legend>Revisar Requisitos</legend> 
                <div class="row">
                    <div class="form-group col-sm-4">
                        <p:outputLabel value="Carta de Solicitud EPS Escritas:" /><br></br>
                        <h:commandLink value="Descargar Documento"  target="_blank">
                            <p:fileDownload value="#{requerimentReviewView.writtenRequest}" contentDisposition="inline"/>
                        </h:commandLink>    
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-sm-4">
                        <p:outputLabel value="Constancia de Inscripcion:" /><br></br>
                        <h:commandLink value="Descargar Documento"  target="_blank">
                            <p:fileDownload value="#{requerimentReviewView.inscriptionConstancy}" contentDisposition="inline"/>
                        </h:commandLink>       
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-sm-4">
                        <p:outputLabel value="Constancia de Cierre de Pensum:" /><br></br>
                        <h:commandLink value="Descargar Documento"  target="_blank">
                            <p:fileDownload value="#{requerimentReviewView.pensumeClosure}" contentDisposition="inline"/>
                        </h:commandLink>     
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-sm-4">
                        <p:outputLabel value="Constancia de Propedeutico:" /><br></br>
                        <h:commandLink value="Descargar Documento"  target="_blank">
                            <p:fileDownload value="#{requerimentReviewView.propedeuticConstancy}" contentDisposition="inline"/>
                        </h:commandLink>     
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-sm-4">
                        <p:outputLabel value="Constancia de Pre Proyecto:" /><br></br>
                        <h:commandLink value="Descargar Documento"  target="_blank">
                            <p:fileDownload value="#{requerimentReviewView.epsPreProject}" contentDisposition="inline"/>
                        </h:commandLink>     
                    </div>
                </div>
                <div class="row" >
                    <div class="form-group col-sm-4">
                        <p:outputLabel value="Documento Finiquito de AEIO:" /><br></br>
                        <h:commandLink value="Descargar Documento"  target="_blank" rendered="#{requerimentReviewView.showAeioSettlement}">
                            <p:fileDownload value="#{requerimentReviewView.aeioSettlement}" contentDisposition="inline"/>
                        </h:commandLink>   
                    </div>
                </div>
                <br></br><br></br>
                <div class="row">
                    <div class="form-group col-sm-4">
                        <button styleClass="btn btn-primary"
                                update="@form,:growl" 
                                jsf:outcome="processes">
                            <span class="glyphicon glyphicon-remove"></span> Rechazar
                        </button>

                        <p:commandLink styleClass="btn btn-primary" oncomplete="PF('dlgEdit').show();"
                                       update=":#{p:component('dlgEdit')}">
                            <span class="glyphicon glyphicon-pencil"></span>Solicitar Cambios
                        </p:commandLink>


                        <button styleClass="btn btn-primary"
                                update="@form,:growl" 
                                action="#{requerimentReviewView.aceptar()}"
                                jsf:outcome="processes">
                            <span class="glyphicon glyphicon-ok"></span> Aceptar
                        </button>
                    </div>
                </div>
            </fieldset>
        </h:form>
        <p:dialog header="Observacion" id="dlgEdit" widgetVar="dlgEdit"
                  fitViewport="true" modal="true" closeOnEscape="true">
            <h:form>
                <div class="modal-body">
                    <fieldset>
                        <div class="row form-group">
                            <p:inputTextarea pt:required="true" value="#{requerimentReviewView.observation}" rows="10" cols="50" counter="display" maxlength="500" counterTemplate="{0} characters remaining." autoResize="false" styleClass="form-control" pt:placeholder="Observaciones"/>
                            <br />
                            <h:outputText id="display" />
                        </div>
                    </fieldset>
                </div>
                <div class="modal-footer ">
                    <p:commandLink styleClass="btn btn-warning btn-lg" style="width: 100%;">
                        <span class="glyphicon glyphicon-ok-sign"></span>Aceptar
                    </p:commandLink>
                </div>
            </h:form>
        </p:dialog>
    </ui:define>

</ui:composition>


